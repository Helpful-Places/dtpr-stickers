(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{369:function(e,t,a){e.exports=a(746)},746:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),c=a.n(i),s=a(12),o=a(13),l=a(15),m=a(14),u=a(16),p=a(7),d=a(305),h=a.n(d),g=a(202),f=a.n(g),v=a(203),b=a.n(v),E=a(25),y=a(17),S=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(y.a,{gutterBottom:!0,variant:"h6",component:"h2"},"Welcome to DTPR!"))}}]),t}(n.Component),x=Object(p.withStyles)(function(e){return Object(p.createStyles)({root:Object(E.a)({flexGrow:1,margin:"auto",padding:2*e.spacing.unit},e.breakpoints.up("sm"),{maxWidth:"calc(100% - 167px)",paddingLeft:4*e.spacing.unit,paddingRight:4*e.spacing.unit})})})(S),O=a(27),j=a.n(O),k=a(40),w=a(131),N=a.n(w),C=a(32),D=a.n(C),I=a(34),P=a.n(I),T=a(26),B=a.n(T),L=a(210),F=a(299),R=a.n(F),A=Object(L.b)({accessToken:"pk.eyJ1IjoiZGFudmsiLCJhIjoiY2lrZzJvNDR0MDBhNXR4a2xqNnlsbWx3ciJ9.myJhweYd_hrXClbKk8XLgQ",injectCSS:!1}),U=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).map=void 0,a.mapContainer=void 0,a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"onClick",value:function(e,t){this.props.onSelectLocation(t.lngLat)}},{key:"render",value:function(){var e=this,t=this.props.markerLocation;return r.a.createElement(A,{style:"mapbox://styles/mapbox/streets-v9",containerStyle:{width:"100%",height:"100%"},onClick:function(t,a){return e.onClick(t,a)}},t&&r.a.createElement(L.a,{coordinates:t},r.a.createElement(R.a,{color:"primary",fontSize:"large"})))}}]),t}(n.Component),z=a(71),W=a(207),M=a.n(W);M.a.initializeApp({apiKey:"AIzaSyDVa2ls3tbEkeEPaKtX8T7P2izKAsPIr9w",authDomain:"stickers-7e1f1.firebaseapp.com",databaseURL:"https://stickers-7e1f1.firebaseio.com",projectId:"stickers-7e1f1",storageBucket:"stickers-7e1f1.appspot.com",messagingSenderId:"464780147561"});var H=M.a,q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={loading:!0,id:"",name:"",lngLat:{lat:40.917684,lng:-74.293952},sensors:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(j.a.mark(function e(){var t,a,n=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.uid,(a=this.props.match.params.placeId)?H.database().ref("places/".concat(a)).on("value",function(e){if(e){var t=e.val(),a=t.name,r=t.lngLat,i=t.sensors;n.setState({name:a,lngLat:r,sensors:i,loading:!1})}else n.setState({loading:!1})}):this.setState({id:N.a.v4(),uid:t,loading:!1});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e,t,a){this.setState(Object(E.a)({},e,t))}},{key:"handleSubmit",value:function(){var e=this.props.uid;if(e){var t=this.state,a=t.id,n=t.name,r=t.lngLat,i=t.sensors;H.database().ref("places/".concat(a)).set({name:n,lngLat:r,sensors:i}),H.database().ref("users/".concat(e,"/places/").concat(a)).set(n),this.props.history.push("/places/".concat(a))}else console.log("Unable to save. User not logged in")}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.name,i=a.lngLat;return r.a.createElement("div",{className:t.root},r.a.createElement(B.a,{gutterBottom:!0,variant:"h5",component:"h2"},"Create a New Place"),r.a.createElement(P.a,{id:"name",label:"Place Name",value:n,onChange:function(t){e.setState({name:t.target.value})}}),r.a.createElement("div",{className:t.locationPicker},r.a.createElement(U,{onSelectLocation:function(t){return e.setState({lngLat:t})},markerLocation:Object.values(i)})),r.a.createElement(D.a,{onClick:function(){return e.handleSubmit()}},"Save"))}}]),t}(r.a.Component),G=Object(p.withStyles)(function(e){return Object(p.createStyles)({root:Object(E.a)({display:"flex",flexDirection:"column",flexGrow:1,margin:"auto",padding:2*e.spacing.unit},e.breakpoints.up("sm"),{maxWidth:"calc(100% - 167px)",paddingLeft:4*e.spacing.unit,paddingRight:4*e.spacing.unit}),locationPicker:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit,width:"100%",height:"500px"}})},{withTheme:!0})(Object(z.e)(q)),J=a(41),K=a.n(J),V=a(132),X=a.n(V),_=a(51),$=a.n(_),Q=a(56),Y=a.n(Q),Z=a(57),ee=a.n(Z),te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={places:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.uid;H.database().ref("/users/".concat(t,"/places")).on("value",function(t){if(t){var a=t.val(),n=[];for(var r in a)n.push({id:r,name:a[r]});e.setState({places:n})}})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(y.a,{gutterBottom:!0,variant:"h5",component:"h2"},"My Places Dashboard"),r.a.createElement(K.a,{container:!0,spacing:24},r.a.createElement(K.a,{item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement($.a,{className:e.card},r.a.createElement(Y.a,{className:e.cardActionArea,href:"/places/new"},r.a.createElement(ee.a,{className:e.addPlaceButton},r.a.createElement(X.a,{fontSize:"large",color:"primary"}),r.a.createElement(y.a,{color:"primary",gutterBottom:!0,variant:"subtitle2",component:"h2"},"Add a Place"))))),this.state.places.map(function(t){var a=t.id,n=t.name;return r.a.createElement(K.a,{key:a,item:!0,xs:12,sm:6,md:4,lg:3},r.a.createElement($.a,{className:e.card},r.a.createElement(Y.a,{className:e.cardActionArea,href:"/places/".concat(a)},r.a.createElement(ee.a,null,r.a.createElement(y.a,{gutterBottom:!0,variant:"h6",component:"h2"},n)))))})))}}]),t}(n.Component),ae=Object(p.withStyles)(function(e){return Object(p.createStyles)({root:Object(E.a)({flexGrow:1,margin:"auto",padding:2*e.spacing.unit},e.breakpoints.up("sm"),{maxWidth:"calc(100% - 167px)",paddingLeft:4*e.spacing.unit,paddingRight:4*e.spacing.unit}),cardActionArea:{height:"200px"},addPlaceButton:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}})})(te),ne=a(94),re=a(209),ie=a.n(re),ce=a(122),se=a.n(ce),oe=a(123),le=a.n(oe),me=a(124),ue=a.n(me),pe=a(28),de=a.n(pe),he=a(33),ge=a.n(he),fe=a(37),ve=a.n(fe),be=a(38),Ee=a.n(be),ye=a(39),Se=a.n(ye),xe=a(306),Oe=a(301),je=new(a.n(Oe).a)({apiKey:"keyqsnK4Q2V9wFk6q"}).base("appjycbdxoV3Nsovw");function ke(e){return we.apply(this,arguments)}function we(){return(we=Object(k.a)(j.a.mark(function e(t){var a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.abrupt("return",new Promise(function(e,n){je(t).select().eachPage(function(e,t){e.forEach(function(e){var t=e.get("Icon SVG"),n=t?t[0].url:"",r={name:e.get("Name"),icon:n,description:e.get("Description"),iconShortname:e.get("Icon Shortname")};a.push(r)}),t()},function(t){t&&n(t),e(a)})}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ne(){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(k.a)(j.a.mark(function e(){var t,a,n,r,i,c,s,o,l,m,u;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=sessionStorage.getItem("airtabledata"))){e.next=5;break}return e.abrupt("return",JSON.parse(t));case 5:return e.t0=Promise,e.next=8,ke("Technology Type");case 8:return e.t1=e.sent,e.next=11,ke("Purpose");case 11:return e.t2=e.sent,e.next=14,ke("Data Type");case 14:return e.t3=e.sent,e.next=17,ke("Access");case 17:return e.t4=e.sent,e.next=20,ke("Storage");case 20:return e.t5=e.sent,e.next=23,ke("Data Process");case 23:return e.t6=e.sent,e.next=26,ke("Accountability");case 26:return e.t7=e.sent,e.t8=[e.t1,e.t2,e.t3,e.t4,e.t5,e.t6,e.t7],e.next=30,e.t0.all.call(e.t0,e.t8);case 30:return a=e.sent,n=Object(xe.a)(a,7),r=n[0],i=n[1],c=n[2],s=n[3],o=n[4],l=n[5],m=n[6],u={techType:r,purpose:i,dataType:c,access:s,storage:o,dataProcess:l,accountable:m},sessionStorage.setItem("airtabledata",JSON.stringify(u)),e.abrupt("return",u);case 42:case"end":return e.stop()}},e)}))).apply(this,arguments)}var De=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).logoFileUpload=void 0,a.handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.state={activeStep:0,logoPreviewSrc:void 0,sensorData:{name:"",placeId:e.placeId,headline:"",description:"",accountable:"",accountableDescription:"",purpose:[],techType:[],dataType:[],dataProcess:[],access:[],storage:[],phone:"",chat:"",email:"",onsiteStaff:"",logoRef:"",sensorImageRef:""},airtableData:void 0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:t=e.sent,this.setState({airtableData:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getSteps",value:function(){return["The Basics","Data Use","Contact Details","Extras"]}},{key:"getStepContent",value:function(e){var t=this,a=this.state.airtableData;if(!a)return null;var n=a.techType,i=a.purpose,c=a.dataType,s=a.dataProcess,o=a.access,l=a.storage;switch(e){case 0:return r.a.createElement("div",null,r.a.createElement(B.a,{variant:"h6",gutterBottom:!0},"The Basics"),r.a.createElement(B.a,{variant:"body1",gutterBottom:!0},"Add top-level information the guide which stickers to use."),r.a.createElement("div",null,r.a.createElement(P.a,{className:this.props.classes.formField,label:"Organization Name",value:this.state.sensorData.accountable,onChange:function(e){t.handleChange("accountable",e.target.value)}})),r.a.createElement("div",null,r.a.createElement(P.a,{className:this.props.classes.formField,label:"Organization Description",value:this.state.sensorData.accountableDescription,onChange:function(e){t.handleChange("accountableDescription",e.target.value)}})),r.a.createElement("div",null,r.a.createElement(Ee.a,{className:this.props.classes.formField},r.a.createElement(ve.a,{htmlFor:"select-multiple"},"Purpose"),r.a.createElement(Se.a,{multiple:!0,value:this.state.sensorData.purpose,onChange:function(e){t.handleChange("purpose",e.target.value)},input:r.a.createElement(ge.a,{id:"select-multiple"})},i.map(function(e){return r.a.createElement(de.a,{key:e.name,value:e.name},e.name)})))),r.a.createElement("div",null,r.a.createElement(Ee.a,{className:this.props.classes.formField},r.a.createElement(ve.a,{htmlFor:"select-multiple"},"Data Type"),r.a.createElement(Se.a,{multiple:!0,value:this.state.sensorData.dataType,onChange:function(e){t.handleChange("dataType",e.target.value)},input:r.a.createElement(ge.a,{id:"select-multiple"})},c.map(function(e){return r.a.createElement(de.a,{key:e.name,value:e.name},e.name)})))),this.state.logoPreviewSrc&&"string"===typeof this.state.logoPreviewSrc&&r.a.createElement("div",null,r.a.createElement("img",{className:this.props.classes.imagePreview,src:this.state.logoPreviewSrc})),r.a.createElement("div",null,r.a.createElement("input",{accept:"image/*",onChange:function(e){var a=t.logoFileUpload.files[0];if(t.setState({logo:a}),a){var n=new FileReader;n.onload=function(){var e=n.result;t.setState({logoPreviewSrc:e})},n.readAsDataURL(a)}},className:this.props.classes.input,id:"raised-button-file",multiple:!0,ref:function(e){return t.logoFileUpload=e},type:"file"}),r.a.createElement("label",{htmlFor:"raised-button-file"},r.a.createElement(D.a,{component:"span",variant:"contained",className:this.props.classes.formField},r.a.createElement(ie.a,{className:this.props.classes.leftIcon}),"Upload Organization Logo"))));case 1:return r.a.createElement("div",null,r.a.createElement(B.a,{variant:"h6",gutterBottom:!0},"Data Use"),r.a.createElement(B.a,{variant:"body1",gutterBottom:!0},"If data is being collected, describe how it is being used"),r.a.createElement("div",null,r.a.createElement(Ee.a,{className:this.props.classes.formField},r.a.createElement(ve.a,{htmlFor:"select-multiple"},"Technology Type"),r.a.createElement(Se.a,{multiple:!0,value:this.state.sensorData.techType,onChange:function(e){t.handleChange("techType",e.target.value)},input:r.a.createElement(ge.a,{id:"select-multiple"})},n.map(function(e){return r.a.createElement(de.a,{key:e.name,value:e.name},e.name)})))),r.a.createElement("div",null,r.a.createElement(Ee.a,{className:this.props.classes.formField},r.a.createElement(ve.a,{htmlFor:"select-multiple"},"Access"),r.a.createElement(Se.a,{multiple:!0,value:this.state.sensorData.access,onChange:function(e){t.handleChange("access",e.target.value)},input:r.a.createElement(ge.a,{id:"select-multiple"})},o.map(function(e){return r.a.createElement(de.a,{key:e.name,value:e.name},e.name)})))),r.a.createElement("div",null,r.a.createElement(Ee.a,{className:this.props.classes.formField},r.a.createElement(ve.a,{htmlFor:"select-multiple"},"Data Storage"),r.a.createElement(Se.a,{multiple:!0,value:this.state.sensorData.storage,onChange:function(e){t.handleChange("storage",e.target.value)},input:r.a.createElement(ge.a,{id:"select-multiple"})},l.map(function(e){return r.a.createElement(de.a,{key:e.name,value:e.name},e.name)})))),r.a.createElement("div",null,r.a.createElement(Ee.a,{className:this.props.classes.formField},r.a.createElement(ve.a,{htmlFor:"select-multiple"},"Data Processing"),r.a.createElement(Se.a,{multiple:!0,value:this.state.sensorData.dataProcess,onChange:function(e){t.handleChange("dataProcess",e.target.value)},input:r.a.createElement(ge.a,{id:"select-multiple"})},s.map(function(e){return r.a.createElement(de.a,{key:e.name,value:e.name},e.name)})))));case 2:return r.a.createElement("div",null,r.a.createElement(B.a,{variant:"h6",gutterBottom:!0},"Contact info"),r.a.createElement(B.a,{variant:"body1",gutterBottom:!0},"Add details about who people can contact with questions"),r.a.createElement("div",null,r.a.createElement(P.a,{className:this.props.classes.formField,label:"email",value:this.state.sensorData.email,onChange:function(e){t.handleChange("email",e.target.value)}})),r.a.createElement("div",null,r.a.createElement(P.a,{className:this.props.classes.formField,label:"phone",value:this.state.sensorData.phone,onChange:function(e){t.handleChange("phone",e.target.value)}})),r.a.createElement("div",null,r.a.createElement(P.a,{className:this.props.classes.formField,label:"chat",value:this.state.sensorData.chat,onChange:function(e){t.handleChange("chat",e.target.value)}})));case 3:return r.a.createElement("div",null,r.a.createElement(B.a,{variant:"h6",gutterBottom:!0},"The Extras"),r.a.createElement(B.a,{variant:"body1",gutterBottom:!0},"Add information for visitors to the webpage"),r.a.createElement("div",null,r.a.createElement(P.a,{className:this.props.classes.formField,label:"Sensor Name (will show on place page)",value:this.state.sensorData.name,onChange:function(e){t.handleChange("name",e.target.value)}})),r.a.createElement("div",null,r.a.createElement(P.a,{className:this.props.classes.formField,label:"Page Headline",value:this.state.sensorData.headline,onChange:function(e){t.handleChange("headline",e.target.value)}})),r.a.createElement("div",null,r.a.createElement(P.a,{className:this.props.classes.formField,label:"Page Description",value:this.state.sensorData.description,multiline:!0,rowsMax:"5",onChange:function(e){t.handleChange("description",e.target.value)}})),this.state.sensorImagePreviewSrc&&"string"===typeof this.state.sensorImagePreviewSrc&&r.a.createElement("div",null,r.a.createElement("img",{className:this.props.classes.imagePreview,src:this.state.sensorImagePreviewSrc})),r.a.createElement("div",null,r.a.createElement("input",{accept:"image/*",onChange:function(e){var a=t.logoFileUpload.files[0];if(t.setState({sensorImage:a}),a){var n=new FileReader;n.onload=function(){var e=n.result;t.setState({sensorImagePreviewSrc:e})},n.readAsDataURL(a)}},className:this.props.classes.input,id:"raised-button-file",multiple:!0,ref:function(e){return t.logoFileUpload=e},type:"file"}),r.a.createElement("label",{htmlFor:"raised-button-file"},r.a.createElement(D.a,{component:"span",variant:"contained",className:this.props.classes.formField},r.a.createElement(ie.a,{className:this.props.classes.leftIcon}),"Upload Image"))));default:return null}}},{key:"handleChange",value:function(e,t){this.setState(function(a){return{sensorData:Object(ne.a)({},a.sensorData,Object(E.a)({},e,t))}})}},{key:"handleSubmit",value:function(){var e=H.auth().currentUser,t=e&&e.uid;if(t){var a=N.a.v4(),n=this.state,r=n.sensorData,i=n.logo,c=n.sensorImage,s=null,o=null;if(i){var l=i.name.split(".").pop();s="images/".concat(a,"/logo.").concat(l);H.storage().ref().child(s).put(i)}if(c){var m=c.name.split(".").pop();o="images/".concat(a,"/sensorImage.").concat(m);H.storage().ref().child(o).put(c)}H.database().ref("sensors/".concat(a)).set(Object(ne.a)({},r,{logoRef:s,sensorImageRef:o,uid:t})),r.placeId&&H.database().ref("places/".concat(r.placeId,"/sensors/").concat(a)).set(r.name||"")}else console.log("Unable to save. User not logged in")}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.getSteps(),n=this.state.activeStep;return r.a.createElement("div",{className:t.root},r.a.createElement(se.a,{activeStep:n},a.map(function(e,t){return r.a.createElement(le.a,{key:e},r.a.createElement(ue.a,null,e))})),r.a.createElement("div",{className:t.stepperContent},this.getStepContent(n),r.a.createElement("div",{className:t.actionsContainer},r.a.createElement("div",null,r.a.createElement(D.a,{disabled:0===n,onClick:this.handleBack,className:t.button},"Back"),r.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){return n===a.length-1?e.handleSubmit():e.handleNext()},className:t.button},n===a.length-1?"Submit":"Next")))))}}]),t}(r.a.Component),Ie=Object(p.withStyles)(function(e){return Object(p.createStyles)({root:{},stepperContent:{padding:3*e.spacing.unit,paddingTop:0},button:{marginTop:e.spacing.unit,marginRight:e.spacing.unit},actionsContainer:{marginBottom:2*e.spacing.unit},resetContainer:{padding:3*e.spacing.unit},formField:{width:"100%",maxWidth:"300px",marginTop:"16px",marginBottom:"8px"},imagePreview:{maxWidth:"300px",maxHeight:"300px",marginTop:"16px",marginBottom:"8px"},input:{display:"none"},leftIcon:{marginRight:e.spacing.unit}})},{withTheme:!0})(Object(z.e)(De)),Pe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={place:{},displayForm:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.placeId;H.database().ref("places/".concat(t)).on("value",function(t){if(t){var a=t.val();e.setState({place:a})}})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.match.params.placeId,n=this.state.place,i=n.name,c=n.lngLat,s=n.sensors,o=void 0===s?{}:s;return r.a.createElement("div",{className:t.root},r.a.createElement(y.a,{gutterBottom:!0,variant:"h4",component:"h2"},i),r.a.createElement("div",{className:t.locationPicker},c&&r.a.createElement(U,{onSelectLocation:function(e){},markerLocation:Object.values(c).reverse()})),r.a.createElement(K.a,{container:!0,spacing:24},Object.keys(o).map(function(e){return r.a.createElement(K.a,{key:e,item:!0,xs:12},r.a.createElement($.a,{className:t.card},r.a.createElement(Y.a,{className:t.cardActionArea,href:"/sensors/".concat(e)},r.a.createElement(ee.a,null,r.a.createElement(y.a,{gutterBottom:!0,variant:"subtitle1",component:"h2"},o[e])))))}),!this.state.displayForm&&r.a.createElement(K.a,{item:!0,xs:12},r.a.createElement($.a,{className:t.card},r.a.createElement(Y.a,{className:t.cardActionArea,onClick:function(){e.setState({displayForm:!0})}},r.a.createElement(ee.a,{className:t.addSensorButton},r.a.createElement(X.a,{fontSize:"large",color:"primary"}),r.a.createElement(y.a,{color:"primary",gutterBottom:!0,variant:"subtitle2",component:"h2"},"Add a Sensor"))))),this.state.displayForm&&r.a.createElement(K.a,{item:!0,xs:12},r.a.createElement($.a,{className:t.card},r.a.createElement(Ie,{placeId:a})))))}}]),t}(n.Component),Te=Object(p.withStyles)(function(e){return Object(p.createStyles)({root:Object(E.a)({flexGrow:1,margin:"auto",padding:2*e.spacing.unit},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md,paddingLeft:4*e.spacing.unit,paddingRight:4*e.spacing.unit}),cardActionArea:{minHeight:"50px"},addSensorButton:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},locationPicker:{marginBottom:2*e.spacing.unit,width:"100%",height:"200px"}})})(Pe),Be=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.uid;return r.a.createElement(z.c,null,r.a.createElement(z.a,{exact:!0,path:this.props.match.path,render:function(t){return r.a.createElement(ae,Object.assign({key:e},t,{uid:e}))}}),r.a.createElement(z.a,{path:"".concat(this.props.match.path,"/new"),render:function(t){return r.a.createElement(G,Object.assign({key:e},t,{uid:e}))}}),r.a.createElement(z.a,{path:"".concat(this.props.match.path,"/:placeId"),render:function(t){return r.a.createElement(Te,Object.assign({key:e},t,{uid:e}))}}))}}]),t}(n.Component),Le=Object(z.e)(Be),Fe=a(302),Re=a.n(Fe),Ae="/images/container/white/hexagon.svg",Ue=function(e){var t;return Object(p.createStyles)({root:(t={flexGrow:1,margin:0,padding:0},Object(E.a)(t,e.breakpoints.up("sm"),{margin:"auto",padding:2*e.spacing.unit,maxWidth:"calc(100% - 167px)",paddingLeft:4*e.spacing.unit,paddingRight:4*e.spacing.unit}),Object(E.a)(t,"@media print",{margin:0,padding:0,width:"100%"}),t),header:Object(E.a)({padding:2*e.spacing.unit},e.breakpoints.up("sm"),{padding:0}),noPrint:{"@media all":{display:"block"},"@media print":{display:"none"}},printOnly:{"@media all":{display:"none"},"@media print":{display:"block"}},badgeContainer:{background:e.palette.grey[200],marginTop:2*e.spacing.unit,padding:e.spacing.unit,display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap","@media print":{margin:0,padding:0,width:"100%",display:"block",float:"none"}},badge:{display:"flex",justifyContent:"center",alignItems:"center",height:"300px",width:"300px",position:"relative",margin:2*e.spacing.unit,pageBreakInside:"avoid",transition:"all 0.8s ease-out","@media print":{pageBreakInside:"avoid",float:"none"}},hex:{position:"absolute",top:0,bottom:0,left:0,right:0,pageBreakInside:"avoid"},stickerContent:{flex:1,height:"100%",position:"relative",display:"flex",margin:"30px",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",pageBreakInside:"avoid"},stickerText:{minWidth:0}})},ze=function(e){return{height:e+"in",width:e+"in"}},We=Object(p.withStyles)(Ue)(function(e){var t=e.classes,a=e.purpose,n=e.airtableData,i=e.badgeSize,c=ze(i),s=a[0],o=n.purpose.find(function(e){return e.name===s});if(!o)return null;o.icon;var l=o.iconShortname,m=o.name;return r.a.createElement("div",{className:t.badge,style:c},r.a.createElement("img",{className:t.hex,src:"/images/".concat(l,".svg"),height:"100%",width:"100%"}),r.a.createElement("div",{className:t.stickerContent},r.a.createElement(y.a,{className:t.stickerText},m)))}),Me=Object(p.withStyles)(Ue)(function(e){var t=e.classes,a=e.techType,n=e.airtableData,i=e.badgeSize,c=ze(i),s=a.filter(function(e){return e.includes("dentif")});return r.a.createElement(r.a.Fragment,null,s.map(function(e){var a=n.techType.find(function(t){return t.name===e});if(!a)return null;a.icon;var i=a.iconShortname,s=a.name;i.includes("yellow")||i.includes("blue");return r.a.createElement("div",{key:s,className:t.badge,style:c},r.a.createElement("img",{className:t.hex,src:"/images/".concat(i,".svg"),height:"100%",width:"100%"}),r.a.createElement("div",{className:t.stickerContent},r.a.createElement(y.a,{className:t.stickerText},s)))}))}),He=Object(p.withStyles)(Ue)(function(e){var t=e.classes,a=e.accountable,n=e.logoSrc,i=e.badgeSize,c=ze(i);return r.a.createElement("div",{className:t.badge,style:c},r.a.createElement("img",{className:"".concat(t.hex," ").concat(t.noPrint),src:Ae,height:"100%",width:"100%"}),r.a.createElement("img",{className:"".concat(t.hex," ").concat(t.printOnly),src:"/images/container/hexagon.svg",height:"100%",width:"100%"}),r.a.createElement("div",{className:t.stickerContent},n&&r.a.createElement("img",{src:n,height:"120",width:"120"}),r.a.createElement(y.a,{className:t.stickerText},a)))}),qe=Object(p.withStyles)(Ue)(function(e){var t=e.classes,a=e.qrcodeSrc,n=e.url,i=e.badgeSize,c=ze(i),s=ze(i/2),o=i>=2;return r.a.createElement("div",{className:t.badge,style:c},r.a.createElement("img",{className:"".concat(t.hex," ").concat(t.noPrint),src:Ae,height:"100%",width:"100%"}),r.a.createElement("img",{className:"".concat(t.hex," ").concat(t.printOnly),src:"/images/container/hexagon.svg",height:"100%",width:"100%"}),r.a.createElement("div",{className:t.stickerContent},r.a.createElement("div",{style:Object(ne.a)({},s,{transition:"all 0.8s ease-out"})},r.a.createElement("img",{src:a,height:"100%",width:"100%"})),o&&n&&r.a.createElement(y.a,{className:t.stickerText,style:{fontSize:"9px"}},n)))}),Ge=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={sensor:void 0,displayForm:!1,airtableData:void 0,sensorUrl:void 0,qrcodeSrc:void 0,badgeSize:2},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(j.a.mark(function e(){var t,a,n,r,i=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:return t=e.sent,this.setState({airtableData:t}),a=this.props.match.params.sensorId,H.database().ref("sensors/".concat(a)).on("value",function(e){if(e){var t=e.val();if(i.setState({sensor:t}),t.logoRef)H.storage().ref().child(t.logoRef).getDownloadURL().then(function(e){i.setState({logoSrc:e})}).catch(function(e){console.log(e)})}}),e.prev=7,n="".concat(window.location.origin,"/sensors/").concat(a),e.next=11,Re.a.toDataURL(n);case 11:r=e.sent,this.setState({qrcodeSrc:r,sensorUrl:n}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.error(e.t0);case 18:case"end":return e.stop()}},e,this,[[7,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.sensor,i=a.airtableData,c=a.qrcodeSrc,s=a.sensorUrl,o=a.logoSrc,l=a.badgeSize;return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.header},r.a.createElement(y.a,{className:t.noPrint,gutterBottom:!0,variant:"h6",component:"h2"},"Print"),r.a.createElement(y.a,{className:t.noPrint,paragraph:!0},"Print this page and cut out the labels for use in your own signage. Or download the images for further layout customization."),r.a.createElement(Ee.a,{className:t.noPrint},r.a.createElement(ve.a,{htmlFor:"select-multiple"},"Size"),r.a.createElement(Se.a,{value:l,onChange:function(t){e.setState({badgeSize:parseFloat(t.target.value)})},input:r.a.createElement(ge.a,{id:"select"})},r.a.createElement(de.a,{value:2},"2 inches"),r.a.createElement(de.a,{value:3},"3 inches"),r.a.createElement(de.a,{value:4},"4 inches"),r.a.createElement(de.a,{value:5},"5 inches"),r.a.createElement(de.a,{value:6},"6 inches"),r.a.createElement(de.a,{value:7},"7 inches"),r.a.createElement(de.a,{value:8},"8 inches"))),r.a.createElement(D.a,{className:t.noPrint,onClick:function(){return window.print()},variant:"contained",color:"primary"},"Print Labels")),n&&i&&r.a.createElement("div",{className:t.badgeContainer},n.accountable&&r.a.createElement(He,{accountable:n.accountable,logoSrc:o,badgeSize:l}),c&&r.a.createElement(qe,{url:s,qrcodeSrc:c,badgeSize:l}),n.techType&&n.techType.length&&r.a.createElement(Me,{techType:n.techType,airtableData:i,badgeSize:l}),n.purpose&&r.a.createElement(We,{purpose:n.purpose,airtableData:i,badgeSize:l})))}}]),t}(n.Component),Je=Object(p.withStyles)(Ue)(Ge),Ke=a(93),Ve=a.n(Ke),Xe=a(125),_e=a.n(Xe),$e=a(126),Qe=a.n($e),Ye=a(127),Ze=a.n(Ye),et=a(303),tt=new(a.n(et).a.Converter)({simplifiedAutoLink:!0,simpleLineBreaks:!0,openLinksInNewWindow:!0,emoji:!0,extensions:[{type:"output",filter:function(e,t){return e=e.replace(/<\/?p[^>]*>/gi,"")}}]}),at=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.icon,n=e.title,i=e.label,c=e.body,s=tt.makeHtml(c);return r.a.createElement(_e.a,{classes:{root:t.expansionPanelRoot,expanded:t.expansionPanelExpanded}},r.a.createElement(Qe.a,{classes:{root:t.expansionPanelSummaryRoot,content:t.expansionPanelSummaryContent,expanded:t.expansionPanelSummaryExpanded}},r.a.createElement("img",{src:a}),r.a.createElement(y.a,{className:t.heading},n),r.a.createElement(y.a,{color:"textSecondary",className:t.label},i)),r.a.createElement(Ze.a,{classes:{root:t.expansionPanelDetailsRoot}},r.a.createElement(y.a,{dangerouslySetInnerHTML:{__html:s}})))}}]),t}(n.Component),nt=Object(p.withStyles)(function(e){return Object(p.createStyles)({expansionPanelRoot:{backgroundImage:"url(/images/chain/middle.svg)",backgroundRepeat:"no-repeat",backgroundPosition:"24px 0",boxShadow:"none","&:first-of-type":{backgroundImage:"url(/images/chain/top.svg)"},"&:last-of-type":{backgroundImage:"url(/images/chain/bottom.svg)"},"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}},expansionPanelExpanded:{margin:"0"},expansionPanelSummaryRoot:{margin:"0",minHeight:"56px","&$expansionPanelSummaryExpanded":{margin:0,minHeight:"56px"}},expansionPanelSummaryContent:{margin:"0","&>:last-child":{paddingRight:0},"&$expansionPanelSummaryExpanded":{margin:0}},expansionPanelSummaryExpanded:{},expansionPanelDetailsRoot:{borderLeft:"2px solid #000",marginLeft:5*e.spacing.unit+1,paddingLeft:3*e.spacing.unit,paddingTop:0,paddingRight:3*e.spacing.unit,paddingBottom:2*e.spacing.unit},heading:{flex:1,alignSelf:"center",marginLeft:e.spacing.unit},label:{alignSelf:"center",marginLeft:e.spacing.unit}})})(at),rt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={sensorData:void 0,isLoading:!0,logoSrc:void 0,sensorImageSrc:void 0,airtableData:void 0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(j.a.mark(function e(){var t,a,n=this;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne();case 2:t=e.sent,this.setState({airtableData:t}),a=this.props.match.params.sensorId,H.database().ref("sensors/".concat(a)).on("value",function(e){if(e){var t=e.val(),a=t.name,r=void 0===a?"":a,i=t.placeId,c=void 0===i?"":i,s=t.headline,o=void 0===s?"":s,l=t.description,m=void 0===l?"":l,u=t.accountable,p=void 0===u?"":u,d=t.accountableDescription,h=void 0===d?"":d,g=t.purpose,f=void 0===g?[]:g,v=t.techType,b=void 0===v?[]:v,E=t.dataType,y=void 0===E?[]:E,S=t.dataProcess,x=void 0===S?[]:S,O=t.access,j=void 0===O?[]:O,k=t.storage,w=void 0===k?[]:k,N=t.phone,C=void 0===N?"":N,D=t.chat,I=void 0===D?"":D,P=t.email,T=void 0===P?"":P,B=t.onsiteStaff,L=void 0===B?"":B,F=t.logoRef,R=void 0===F?"":F,A=t.sensorImageRef,U=void 0===A?"":A;if(n.setState({sensorData:{name:r,placeId:c,headline:o,description:m,accountable:p,accountableDescription:h,purpose:f,techType:b,dataType:y,dataProcess:x,access:j,storage:w,phone:C,chat:I,email:T,onsiteStaff:L,logoRef:R,sensorImageRef:U},isLoading:!1}),console.log("hi",U),console.log(t),U)H.storage().ref().child(R).getDownloadURL().then(function(e){n.setState({sensorImageSrc:e})}).catch(function(e){console.log(e)});if(R)H.storage().ref().child(R).getDownloadURL().then(function(e){n.setState({logoSrc:e})}).catch(function(e){console.log(e)})}});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=(t.isLoading,t.sensorData),n=t.logoSrc,i=t.sensorImageSrc,c=t.airtableData;if(!a)return null;a.placeId;var s=a.headline,o=a.description,l=a.accountable,m=a.accountableDescription,u=a.purpose,p=a.techType,d=a.dataType,h=a.dataProcess,g=a.access,f=a.storage,v=(a.phone,a.chat,a.email,a.onsiteStaff,void 0),b=void 0,E=void 0;return c&&(v=u&&u[0]&&c.purpose.find(function(e){return e.name===u[0]})||void 0,b=p&&p[0]&&c.techType.find(function(e){return e.name===p[0]})||void 0,E=l&&c.accountable.find(function(e){return e.name===l})||void 0),r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.header},s&&r.a.createElement(y.a,{gutterBottom:!0,variant:"h4",component:"h2",align:"center"},s)),r.a.createElement(Ve.a,{variant:"fullWidth"}),r.a.createElement("div",{className:e.summaryWrapper},v&&r.a.createElement("div",{className:e.summaryCell},r.a.createElement("img",{className:e.summaryBadge,src:v.icon}),r.a.createElement(y.a,{variant:"subtitle2"},v.name)),b&&r.a.createElement("div",{className:e.summaryCell},r.a.createElement("img",{className:e.summaryBadge,src:b.icon}),r.a.createElement(y.a,{variant:"subtitle2"},b.name)),E&&r.a.createElement("div",{className:e.summaryCell},r.a.createElement("img",{className:e.summaryBadge,src:n||E.icon}),r.a.createElement(y.a,{variant:"subtitle2"},E.name))),r.a.createElement(Ve.a,{variant:"fullWidth"}),r.a.createElement("div",{className:e.content},i&&r.a.createElement("img",{className:e.sensorImage,src:i}),o&&r.a.createElement(y.a,{align:"center",paragraph:!0},o)),c&&r.a.createElement("div",null,l&&m&&r.a.createElement(nt,{icon:c.accountable[0].icon,title:l,label:"Accountability",body:m}),u&&u.map(function(e){var t=c.purpose.find(function(t){return t.name===e});return t?r.a.createElement(nt,{key:t.name,icon:t.icon,title:t.name,label:"Purpose",body:t.description}):null}),p&&p.map(function(e){var t=c.techType.find(function(t){return t.name===e});return t?r.a.createElement(nt,{key:t.name,icon:t.icon,title:t.name,label:"Technology Type",body:t.description}):null}),d&&d.map(function(e){var t=c.dataType.find(function(t){return t.name===e});return t?r.a.createElement(nt,{key:t.name,icon:t.icon,title:t.name,label:"Data Type",body:t.description}):null}),h&&h.map(function(e){var t=c.dataType.find(function(t){return t.name===e});return t?r.a.createElement(nt,{key:t.name,icon:t.icon,title:t.name,label:"Data Processing",body:t.description}):null}),g&&g.map(function(e){var t=c.access.find(function(t){return t.name===e});return t?r.a.createElement(nt,{key:t.name,icon:t.icon,title:t.name,label:"Access",body:t.description}):null}),f&&f.map(function(e){var t=c.storage.find(function(t){return t.name===e});return t?r.a.createElement(nt,{key:t.name,icon:t.icon,title:t.name,label:"Storage",body:t.description}):null})))}}]),t}(n.Component),it=Object(p.withStyles)(function(e){return Object(p.createStyles)({root:Object(E.a)({flexGrow:1,margin:"auto",paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),header:{padding:3*e.spacing.unit},content:{padding:3*e.spacing.unit},summaryWrapper:{display:"flex",padding:3*e.spacing.unit},summaryCell:{flex:1,textAlign:"center"},summaryBadge:{height:"48px",marginLeft:"auto",marginRight:"auto",marginBottom:e.spacing.unit},heading:{flex:1,alignSelf:"center",marginLeft:e.spacing.unit},label:{alignSelf:"center",marginLeft:e.spacing.unit},sensorImage:{width:"100%",maxWidth:"100%",maxHeight:"300px",margin:"auto"}})})(rt),ct=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.uid;return r.a.createElement(z.c,null,r.a.createElement(z.a,{path:"".concat(this.props.match.path,"/new"),render:function(t){return r.a.createElement(Ie,Object.assign({key:e},t,{uid:e}))}}),r.a.createElement(z.a,{path:"".concat(this.props.match.path,"/:sensorId/print"),render:function(t){return r.a.createElement(Je,Object.assign({key:e},t,{uid:e}))}}),r.a.createElement(z.a,{path:"".concat(this.props.match.path,"/:sensorId"),render:function(t){return r.a.createElement(it,Object.assign({key:e},t,{uid:e}))}}))}}]),t}(n.Component),st=Object(z.e)(ct),ot=a(55),lt=a(304),mt=a.n(lt),ut=a(204),pt=a.n(ut),dt={signInFlow:"popup",signInSuccessUrl:"/",signInOptions:[H.auth.EmailAuthProvider.PROVIDER_ID],credentialHelper:pt.a.auth.CredentialHelper.NONE},ht=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={isSignedIn:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;H.auth().onAuthStateChanged(function(t){e.setState({isSignedIn:!!t})})}},{key:"render",value:function(){var e=H.auth();return this.state.isSignedIn?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("a",{onClick:function(){return H.auth().signOut()}},"Sign-out"))):r.a.createElement("div",null,r.a.createElement(mt.a,{uiConfig:dt,firebaseAuth:e}))}}]),t}(n.Component),gt=a(128),ft=a.n(gt),vt=a(129),bt=a.n(vt),Et=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isSignedIn,a=e.loading,n=e.classes;return r.a.createElement(ft.a,{className:n.root,position:"sticky"},r.a.createElement(bt.a,null,r.a.createElement("div",{style:{flexGrow:1}},r.a.createElement(D.a,{href:"/",color:"inherit"},r.a.createElement(B.a,{variant:"h6",color:"inherit",style:{textTransform:"none"}},"Data Transparency in the Public Realm"))),r.a.createElement("div",{style:{flexShrink:0}},!a&&!t&&r.a.createElement(D.a,{href:"/login",color:"inherit"},r.a.createElement(B.a,{color:"inherit",style:{textTransform:"none"}},"Login")),!a&&t&&r.a.createElement(D.a,{onClick:function(){return H.auth().signOut()},color:"inherit"},r.a.createElement(B.a,{color:"inherit",style:{textTransform:"none"}},"Sign Out")))))}}]),t}(n.Component),yt=Object(p.withStyles)(function(e){return Object(p.createStyles)({root:{"@media print":{display:"none"}}})})(Et),St=a(130),xt=a.n(St),Ot=Object(p.createMuiTheme)({palette:{primary:h.a,secondary:f.a,background:{default:b.a.white}},typography:{useNextVariants:!0}}),jt=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,isSignedIn:!1,uid:void 0,email:void 0,displayName:void 0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;H.auth().onAuthStateChanged(function(t){var a=t||{},n=a.uid,r=void 0===n?void 0:n,i=a.email,c=void 0===i?void 0:i,s=a.displayName,o=void 0===s?void 0:s;e.setState({isSignedIn:!!t,uid:r,email:c,displayName:o,loading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.isSignedIn,n=e.uid;e.email,e.displayName;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.MuiThemeProvider,{theme:Ot},r.a.createElement(xt.a,null),r.a.createElement(yt,{loading:t,isSignedIn:a}),r.a.createElement(ot.a,null,r.a.createElement(z.a,{path:"/",exact:!0,render:function(e){return a?r.a.createElement(Le,Object.assign({},e,{key:n,uid:n})):r.a.createElement(x,null)}}),r.a.createElement(z.a,{path:"/login",component:ht}),r.a.createElement(z.a,{path:"/places",render:function(e){return r.a.createElement(Le,Object.assign({},e,{key:n,uid:n}))}}),r.a.createElement(z.a,{path:"/sensors",render:function(e){return r.a.createElement(st,Object.assign({},e,{key:n,uid:n}))}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(745);c.a.render(r.a.createElement(jt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[369,1,2]]]);
//# sourceMappingURL=main.642d9a84.chunk.js.map